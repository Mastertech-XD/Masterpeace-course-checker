<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARTISAN COURSE QUALIFICATION CHECKER</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f0ff;
            --neon-pink: #ff0f7b;
            --neon-purple: #8a2be2;
            --neon-green: #00ff88;
            --neon-yellow: #f5d300;
            --neon-orange: #ff6b00;
            --dark-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --card-bg: rgba(25, 25, 45, 0.95);
            --text-light: #f0f0ff;
            --text-dim: #b0b0c0;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: var(--dark-bg);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-attachment: fixed;
            background-size: cover;
        }

        h1 {
            color: var(--neon-orange);
            margin: 1rem 0 2rem;
            text-align: center;
            font-size: 2.5rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(255, 107, 0, 0.5);
            letter-spacing: 1px;
        }

        .container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            width: 100%;
            max-width: 1000px;
            box-shadow: 0 0 30px rgba(255, 107, 0, 0.2);
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 107, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neon-orange);
            font-weight: 500;
            font-size: 1.1rem;
        }

        select, .multiselect {
            width: 100%;
            padding: 0.8rem;
            border-radius: 8px;
            border: 1px solid var(--neon-orange);
            background-color: rgba(20, 25, 40, 0.8);
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: var(--neon-yellow);
            box-shadow: 0 0 10px rgba(255, 211, 0, 0.3);
        }

        .multiselect-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .multiselect-option {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            background: rgba(255, 107, 0, 0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .multiselect-option input {
            margin-right: 0.5rem;
        }

        .multiselect-option:hover {
            background: rgba(255, 107, 0, 0.2);
            transform: translateY(-2px);
            border-color: var(--neon-orange);
        }

        .multiselect-option input:checked + label {
            color: var(--neon-yellow);
            font-weight: 500;
        }

        button {
            background: var(--neon-orange);
            color: var(--dark-bg);
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 1rem;
            width: 100%;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        button:hover {
            background: var(--neon-yellow);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 211, 0, 0.4);
        }

        button:hover::before {
            left: 100%;
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        button:disabled::before {
            display: none;
        }

        .results {
            margin-top: 2rem;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .course-category {
            margin-bottom: 2rem;
            background: rgba(10, 10, 20, 0.5);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .category-title {
            color: var(--neon-yellow);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--neon-orange);
            font-family: 'Orbitron', sans-serif;
            display: flex;
            align-items: center;
        }

        .category-title::before {
            content: '▹';
            margin-right: 0.5rem;
            color: var(--neon-orange);
        }

        .course-item {
            background: rgba(30, 15, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 3px solid var(--neon-orange);
            transition: all 0.3s ease;
        }

        .course-item:hover {
            transform: translateX(5px);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);
        }

        .course-name {
            font-weight: 600;
            color: var(--neon-yellow);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .course-name::before {
            content: '•';
            margin-right: 0.5rem;
            color: var(--neon-orange);
        }

        .institutions {
            font-style: italic;
            color: var(--text-dim);
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .institution-item {
            display: inline-block;
            background: rgba(255, 107, 0, 0.1);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .institution-item:hover {
            background: rgba(255, 107, 0, 0.3);
            transform: scale(1.05);
        }

        .error-message {
            color: var(--neon-pink);
            margin-top: 0.5rem;
            font-size: 0.9rem;
            display: none;
        }

        .selection-summary {
            margin: 1rem 0;
            font-size: 0.9rem;
            color: var(--neon-green);
            padding: 0.5rem;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 5px;
            border-left: 3px solid var(--neon-green);
        }

        .grade-info {
            color: var(--neon-green);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 5px;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--neon-green);
            display: none;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--neon-orange);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .no-results {
            text-align: center;
            padding: 2rem;
            color: var(--neon-pink);
            background: rgba(255, 15, 123, 0.1);
            border-radius: 10px;
            margin-top: 1rem;
        }

        .no-results h3 {
            color: var(--neon-pink);
            margin-bottom: 1rem;
        }

        .no-results ul {
            text-align: left;
            max-width: 400px;
            margin: 1rem auto;
        }

        .no-results li {
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }

        .skip-link {
            position: absolute;
            left: -9999px;
            top: 0;
            background: var(--neon-orange);
            color: var(--dark-bg);
            padding: 1rem;
            z-index: 100;
            text-decoration: none;
            font-weight: bold;
        }
        
        .skip-link:focus {
            left: 0;
        }

        .requirements {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: var(--neon-blue);
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .multiselect-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <a href="#results" class="skip-link">Skip to results</a>
    <h1>ARTISAN COURSE QUALIFICATION CHECKER</h1>
    
    <div class="container">
        <div class="form-group">
            <label for="meanGrade">SELECT YOUR KCSE MEAN GRADE:</label>
            <select id="meanGrade">
                <option value="">---Select Your Mean Grade---</option>
                <option value="E">E (Minimum for Artisan courses)</option>
            </select>
            <div class="grade-info" id="gradeInfo"></div>
        </div>
        
        <div class="form-group">
            <label>SELECT PREFERRED COUNTIES (MINIMUM 2):</label>
            <div class="multiselect-container" id="countySelect">
                <!-- Counties will be populated by JavaScript -->
            </div>
            <div class="error-message" id="countyError">Please select at least 2 counties</div>
            <div class="selection-summary" id="countySummary"></div>
        </div>
        
        <div class="form-group">
            <label>SELECT PREFERRED FIELDS (MINIMUM 3):</label>
            <div class="multiselect-container" id="fieldSelect">
                <!-- Fields will be populated by JavaScript -->
            </div>
            <div class="error-message" id="fieldError">Please select at least 3 fields</div>
            <div class="selection-summary" id="fieldSummary"></div>
        </div>
        
        <button id="searchBtn" onclick="showFilteredCourses()" disabled>FIND COURSES</button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Searching for courses...</p>
        </div>
        
        <div class="results" id="results">
            <!-- Results will be displayed here -->
        </div>
    </div>

    <script>
        // Enhanced Data
        const counties = [
            "Baringo", "Bomet", "Bungoma", "Busia", "Elgeyo-Marakwet",
            "Embu", "Garissa", "Homa Bay", "Isiolo", "Kajiado",
            "Kakamega", "Kericho", "Kiambu", "Kilifi", "Kirinyaga",
            "Kisii", "Kisumu", "Kitui", "Kwale", "Laikipia",
            "Lamu", "Machakos", "Makueni", "Mandera", "Marsabit",
            "Meru", "Migori", "Mombasa", "Murang'a", "Nairobi",
            "Nakuru", "Nandi", "Narok", "Nyamira", "Nyandarua",
            "Nyeri", "Samburu", "Siaya", "Taita-Taveta", "Tana River",
            "Tharaka-Nithi", "Trans Nzoia", "Turkana", "Uasin Gishu",
            "Vihiga", "Wajir", "West Pokot"
        ];

        const fields = [
            "Engineering and Technology",
            "Food Science",
            "Building and Construction",
            "Clothing, Fashion, and Textile",
            "Technical",
            "Hair Dressing and Beauty Therapy",
            "Agriculture Science",
            "Business",
            "Hospitality and Tourism",
            "ICT"
        ];

        // Complete Artisan course data with institutions and counties
        const artisanCourses = [
            {
                "category": "Building and Construction",
                "courses": [
                    {
                        "name": "Artisan in Masonry",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["Maths", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Plumbing",
                        "institutions": [
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nyeri Technical Training Institute", "county": "Nyeri"},
                            {"name": "Meru Technical Training Institute", "county": "Meru"},
                            {"name": "Machakos Technical Training Institute", "county": "Machakos"},
                            {"name": "Thika Technical Training Institute", "county": "Kiambu"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["Maths", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Carpentry and Joinery",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["Maths", "English"]
                        }
                    }
                ]
            },
            {
                "category": "Engineering and Technology",
                "courses": [
                    {
                        "name": "Artisan in Electrical Installation",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kitale Technical Training Institute", "county": "Trans Nzoia"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nyeri Technical Training Institute", "county": "Nyeri"}
                        ],
                        "requirements": {
                            "minGrade": "D",
                            "subjectRequirements": ["Maths", "Physics", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Motor Vehicle Mechanics",
                        "institutions": [
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"}
                        ],
                        "requirements": {
                            "minGrade": "D",
                            "subjectRequirements": ["Maths", "Physics", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Welding and Fabrication",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["Maths", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Mechanical Engineering",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "D",
                            "subjectRequirements": ["Maths", "Physics", "English"]
                        }
                    }
                ]
            },
            {
                "category": "Business",
                "courses": [
                    {
                        "name": "Artisan in Business Management",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Kiambu Institute of Science and Technology", "county": "Kiambu"},
                            {"name": "Machakos Technical Training Institute", "county": "Machakos"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Business Studies"]
                        }
                    },
                    {
                        "name": "Artisan in Accounting",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Mathematics"]
                        }
                    },
                    {
                        "name": "Artisan in Sales and Marketing",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Business Studies"]
                        }
                    }
                ]
            },
            {
                "category": "Food Science",
                "courses": [
                    {
                        "name": "Artisan in Food and Beverage Production",
                        "institutions": [
                            {"name": "Kenya Utalii College", "county": "Nairobi"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Nyeri Technical Training Institute", "county": "Nyeri"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Home Science"]
                        }
                    },
                    {
                        "name": "Artisan in Bakery and Confectionery",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Home Science"]
                        }
                    }
                ]
            },
            {
                "category": "Hair Dressing and Beauty Therapy",
                "courses": [
                    {
                        "name": "Artisan in Hairdressing",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English"]
                        }
                    },
                    {
                        "name": "Artisan in Beauty Therapy",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English"]
                        }
                    }
                ]
            },
            {
                "category": "ICT",
                "courses": [
                    {
                        "name": "Artisan in Computer Repair",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "D",
                            "subjectRequirements": ["Maths", "English"]
                        }
                    },
                    {
                        "name": "Artisan in Computer Applications",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English"]
                        }
                    }
                ]
            },
            {
                "category": "Hospitality and Tourism",
                "courses": [
                    {
                        "name": "Artisan in Food and Beverage Service",
                        "institutions": [
                            {"name": "Kenya Utalii College", "county": "Nairobi"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Nyeri Technical Training Institute", "county": "Nyeri"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English"]
                        }
                    },
                    {
                        "name": "Artisan in Housekeeping and Laundry",
                        "institutions": [
                            {"name": "Kenya Utalii College", "county": "Nairobi"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Nyeri Technical Training Institute", "county": "Nyeri"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English"]
                        }
                    }
                ]
            },
            {
                "category": "Clothing, Fashion, and Textile",
                "courses": [
                    {
                        "name": "Artisan in Dressmaking and Fashion Design",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Home Science"]
                        }
                    },
                    {
                        "name": "Artisan in Tailoring",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Home Science"]
                        }
                    }
                ]
            },
            {
                "category": "Agriculture Science",
                "courses": [
                    {
                        "name": "Artisan in Agriculture",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Biology"]
                        }
                    },
                    {
                        "name": "Artisan in Animal Health",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Biology"]
                        }
                    }
                ]
            },
            {
                "category": "Technical",
                "courses": [
                    {
                        "name": "Artisan in Drawing and Design",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Maths"]
                        }
                    },
                    {
                        "name": "Artisan in Printing Technology",
                        "institutions": [
                            {"name": "Nairobi Technical Training Institute", "county": "Nairobi"},
                            {"name": "Eldoret Polytechnic", "county": "Uasin Gishu"},
                            {"name": "Mombasa Technical Training Institute", "county": "Mombasa"},
                            {"name": "Kisumu National Polytechnic", "county": "Kisumu"},
                            {"name": "Nakuru Vocational Training Centre", "county": "Nakuru"}
                        ],
                        "requirements": {
                            "minGrade": "E",
                            "subjectRequirements": ["English", "Maths"]
                        }
                    }
                ]
            }
        ];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Populate counties
            const countySelect = document.getElementById('countySelect');
            counties.forEach(county => {
                const option = document.createElement('div');
                option.className = 'multiselect-option';
                option.innerHTML = `
                    <input type="checkbox" id="county-${county.replace(/'/g, '').replace(/\s+/g, '-').toLowerCase()}" value="${county}">
                    <label for="county-${county.replace(/'/g, '').replace(/\s+/g, '-').toLowerCase()}">${county}</label>
                `;
                countySelect.appendChild(option);
            });

            // Populate fields
            const fieldSelect = document.getElementById('fieldSelect');
            fields.forEach(field => {
                const option = document.createElement('div');
                option.className = 'multiselect-option';
                option.innerHTML = `
                    <input type="checkbox" id="field-${field.replace(/,/g, '').replace(/\s+/g, '-').toLowerCase()}" value="${field}">
                    <label for="field-${field.replace(/,/g, '').replace(/\s+/g, '-').toLowerCase()}">${field}</label>
                `;
                fieldSelect.appendChild(option);
            });

            // Add event listeners for validation
            document.querySelectorAll('#countySelect input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', validateSelections);
            });

            document.querySelectorAll('#fieldSelect input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', validateSelections);
            });

            // Add event listener for mean grade change
            document.getElementById('meanGrade').addEventListener('change', updateGradeInfo);

            // Initialize grade info
            updateGradeInfo();
        });

        function updateGradeInfo() {
            const meanGrade = document.getElementById('meanGrade').value;
            const gradeInfo = document.getElementById('gradeInfo');
            
            if (meanGrade === 'E') {
                gradeInfo.textContent = "Your grade qualifies you for all Artisan courses (minimum E required)";
            } else {
                gradeInfo.textContent = `Your grade (${meanGrade}) qualifies you for all Artisan courses and any with higher requirements up to ${meanGrade}`;
            }
        }

        function validateSelections() {
            const selectedCounties = Array.from(document.querySelectorAll('#countySelect input[type="checkbox"]:checked')).map(cb => cb.value);
            const selectedFields = Array.from(document.querySelectorAll('#fieldSelect input[type="checkbox"]:checked')).map(cb => cb.value);
            
            // Update summaries
            document.getElementById('countySummary').textContent = selectedCounties.length > 0 ? 
                `Selected: ${selectedCounties.join(', ')}` : '';
            document.getElementById('fieldSummary').textContent = selectedFields.length > 0 ? 
                `Selected: ${selectedFields.join(', ')}` : '';
            
            // Validate counties
            const countyError = document.getElementById('countyError');
            if (selectedCounties.length < 2) {
                countyError.style.display = 'block';
            } else {
                countyError.style.display = 'none';
            }
            
            // Validate fields
            const fieldError = document.getElementById('fieldError');
            if (selectedFields.length < 3) {
                fieldError.style.display = 'block';
            } else {
                fieldError.style.display = 'none';
            }
            
            // Enable/disable search button
            const searchBtn = document.getElementById('searchBtn');
            searchBtn.disabled = !(selectedCounties.length >= 2 && selectedFields.length >= 3);
        }

        async function showFilteredCourses() {
            const searchBtn = document.getElementById('searchBtn');
            const loading = document.getElementById('loading');
            const resultsDiv = document.getElementById('results');
            
            try {
                // Show loading state
                searchBtn.disabled = true;
                loading.style.display = 'block';
                resultsDiv.style.display = 'none';
                
                // Simulate API call delay (remove in production)
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // Get selected values
                const meanGrade = document.getElementById('meanGrade').value;
                const selectedCounties = Array.from(document.querySelectorAll('#countySelect input[type="checkbox"]:checked')).map(cb => cb.value);
                const selectedFields = Array.from(document.querySelectorAll('#fieldSelect input[type="checkbox"]:checked')).map(cb => cb.value);
                
                // Grade comparison order
                const gradeOrder = ["E", "D-", "D", "D+", "C-", "C", "C+", "B-", "B", "B+", "A-", "A"];
                
                // Filter courses by selected fields and grade
                const filteredCategories = artisanCourses.filter(category => 
                    selectedFields.includes(category.category)
                ).map(category => {
                    return {
                        ...category,
                        courses: category.courses.filter(course => {
                            const courseMinGrade = course.requirements?.minGrade || "E";
                            return gradeOrder.indexOf(meanGrade) >= gradeOrder.indexOf(courseMinGrade);
                        })
                    };
                }).filter(category => category.courses.length > 0);
                
                // Display results
                displayResults(filteredCategories, selectedCounties);
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>Error loading results</h3>
                        <p>${error.message}</p>
                    </div>
                `;
                resultsDiv.style.display = 'block';
            } finally {
                loading.style.display = 'none';
                searchBtn.disabled = false;
            }
        }

        function displayResults(filteredCategories, selectedCounties) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            
            if (filteredCategories.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>No matching courses found</h3>
                        <p>Try adjusting your filters to find more options:</p>
                        <ul>
                            <li>Select more counties or fields</li>
                            <li>Check if your grade meets requirements</li>
                            <li>Consider related fields of study</li>
                        </ul>
                    </div>
                `;
                resultsDiv.style.display = 'block';
                return;
            }
            
            filteredCategories.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'course-category';
                
                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'category-title';
                categoryTitle.textContent = category.category;
                categoryDiv.appendChild(categoryTitle);
                
                let hasCourses = false;
                
                category.courses.forEach(course => {
                    // Filter institutions by selected counties
                    const filteredInstitutions = course.institutions.filter(inst => 
                        selectedCounties.includes(inst.county)
                    );
                    
                    if (filteredInstitutions.length > 0) {
                        hasCourses = true;
                        
                        const courseDiv = document.createElement('div');
                        courseDiv.className = 'course-item';
                        
                        const courseName = document.createElement('div');
                        courseName.className = 'course-name';
                        courseName.textContent = course.name;
                        courseDiv.appendChild(courseName);
                        
                        // Add requirements if available
                        if (course.requirements) {
                            const requirementsDiv = document.createElement('div');
                            requirementsDiv.className = 'requirements';
                            requirementsDiv.innerHTML = `
                                <strong>Requirements:</strong> Minimum grade ${course.requirements.minGrade}, Subjects: ${course.requirements.subjectRequirements.join(', ')}
                            `;
                            courseDiv.appendChild(requirementsDiv);
                        }
                        
                        const institutionsLabel = document.createElement('div');
                        institutionsLabel.className = 'institutions';
                        institutionsLabel.textContent = 'Available in:';
                        courseDiv.appendChild(institutionsLabel);
                        
                        const institutionsContainer = document.createElement('div');
                        filteredInstitutions.forEach(inst => {
                            const institutionSpan = document.createElement('span');
                            institutionSpan.className = 'institution-item';
                            institutionSpan.textContent = `${inst.name} (${inst.county})`;
                            institutionsContainer.appendChild(institutionSpan);
                        });
                        courseDiv.appendChild(institutionsContainer);
                        
                        categoryDiv.appendChild(courseDiv);
                    }
                });
                
                if (hasCourses) {
                    resultsDiv.appendChild(categoryDiv);
                }
            });
            
            if (resultsDiv.children.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>No courses available in your selected counties</h3>
                        <p>Try selecting additional counties to see more options.</p>
                    </div>
                `;
            }
            
            resultsDiv.style.display = 'block';
            
            // Scroll to results
            setTimeout(() => {
                resultsDiv.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }
    </script>
</body>
</html>
